{% extends 'base.html.twig' %}

{% block title %}Hello ArticleController!
{% endblock %}

{% block body %}
	<div class="container">

		<div class="container--article">

			<h2>{{ articles.title}}</h2>
			<a href="{{path('app_view_articles', {slug: articles.slug}) }}" class="container--article__link">
				<img src="{{ vich_uploader_asset(articles) }}" alt="{{ articles.title }}">
			</a>
			<p>{{ articles.content| raw}}</p>


			<span class="container--article__infos">
				<span class="container--article__author">
					par
					{% if articles.author.pseudo %}
						{{articles.author.pseudo | capitalize}}
					{% endif %}
				</span>
				<span class="container--article__actions">
					{% if is_granted("ROLE_USER") %}
						<a href="{{path('app_edit_articles', {slug: articles.slug })}}" class="button--edit">Modifier</a>
						<a href="{{path('app_delete_articles', {slug: articles.slug, _csrf_token: csrf_token('delete-article') })}}" class="button--delete">Supprimer</a>
					{% endif %}
				</span>
			</span>
			{{form(form)}}
				{% for comment in comments %}
					{% if comment.article.id == articles.id %}
						<div>
							{{comment.content}}<br>
							{{comment.author.pseudo}}
						</div>
					{% endif %}

				{% endfor %}
			</div>
		</div>
		{% if is_granted("ROLE_USER") %}
			<a href="{{path('app_add_articles')}}" class="button__add">+</a>
		{% endif %}

	{% endblock %}
